class t{constructor(t){this.ifr=t,this.ifr.cloneToIframe(),this.print()}checkIdIsEmpty(t){t||console.error("id 不能为空")}print(){this.ifr.print()}}class e{constructor(t){this.config=t,console.log(t),this.iframe=this.createIframe(),this.printPage=document.getElementById(this.config.id),this.iframeId=this.config.id+"-iframe"}createIframe(){const t=document.getElementById(this.iframeId);if(!t){let t=document.createElement("iframe");return t.setAttribute("style","visibility: hidden; height: 0; width: 0; position: absolute;"),t.setAttribute("id",this.iframeId),t.setAttribute("name",this.iframeId),document.getElementsByTagName("body")[0].appendChild(t),document.getElementById(this.iframeId)}return t}cloneToIframe(){if(console.log(this.iframeId),this.printPage&&this.traverseNode(this.printPage,t=>{t.setAttribute("p-style",window.getComputedStyle(t,null).cssText)}),this.iframeId){const t=this.iframe.contentWindow;if(t){const e=t.document.getElementsByTagName("body")[0];this.printPage&&e&&t&&(e.innerHTML="",e.appendChild(this.printPage.cloneNode(!0)))}}this.removeTempStyle()}removeTempStyle(){if(this.printPage&&this.traverseNode(this.printPage,t=>{t.removeAttribute("p-style")}),this.iframe.contentWindow){const t=this.iframe.contentWindow.document.getElementById(this.config.id);t&&this.traverseNode(t,t=>{const e=t.getAttribute("p-style");e&&t.setAttribute("style",e),t.removeAttribute("p-style")})}}traverseNode(t,e){if(e(t),t.hasChildNodes())for(const i of t.children)this.traverseNode(i,e)}print(){this.iframe.contentWindow&&this.iframe.contentWindow.print()}copyStyleToIframe(t,e){}}const i={id:"print-web",title:"print page"};function n(n){const s=Object.assign(i,n);return console.log(s,i),new t(new e(s))}"undefined"!=typeof window&&(window.p=n);export default n;
//# sourceMappingURL=print-web.min.js.map
